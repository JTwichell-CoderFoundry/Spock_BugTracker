@using Spock_BugTracker.Helpers

@model Spock_BugTracker.Models.Ticket


<style>
    .cell-fill-input {
        margin-bottom: 20px;
        width: 100%;
        height: 50px;
        font-weight: bold;
    }

    .cell-fill-textarea {
        margin-bottom: 20px;
        width: 100%;
        height: 200px;
        font-weight: bold;
    }

    .btnPad {
        padding-top: 20px:
    }


</style>

@{
    ViewBag.Title = "Dashboard";
}

<h2>Ticket Dashboard</h2>

<!-- Ticket & Project information-->
<div class="row">
    <div class="col-md-8">
        <section class="panel panel-primary">
            <header class="panel-heading">
                <div class="panel-actions">
                    <a href="#" class="fa fa-caret-down"></a>
                    <a href="#" class="fa fa-times"></a>
                </div>

                <h2 class="panel-title">Ticket Information</h2>
            </header>
            <div class="panel-body">
                <h2>TICKET INFO GOES HERE</h2>
            </div>
        </section>
    </div>
    <div class="col-md-4">
        <section class="panel panel-dark">
            <header class="panel-heading">
                <div class="panel-actions">
                    <a href="#" class="fa fa-caret-down"></a>
                    <a href="#" class="fa fa-times"></a>
                </div>

                <h2 class="panel-title">Project Information</h2>
            </header>
            <div class="panel-body">
                <h2>PROJECT INFO GOES HERE</h2>
            </div>
        </section>
    </div>
</div>

<!-- Ticket "Badges / Labels"-->
<div class="row">
    <div class="col-md-3">
        <section class="panel panel-warning">
            <header class="panel-heading">
                <div class="panel-actions">
                    <a href="#" class="fa fa-caret-down"></a>
                    <a href="#" class="fa fa-times"></a>
                </div>

                <h2 class="panel-title">Attachment(s)</h2>
            </header>
            <div class="panel-body">
                <h2>ATTACHMENT BADGE/LABEL </h2>
            </div>
        </section>
    </div>
    <div class="col-md-3">
        <section class="panel panel-dark">
            <header class="panel-heading">
                <div class="panel-actions">
                    <a href="#" class="fa fa-caret-down"></a>
                    <a href="#" class="fa fa-times"></a>
                </div>

                <h2 class="panel-title">Comment(s)</h2>
            </header>
            <div class="panel-body">
                <h2>COMMENT BADGE/LABEL</h2>
            </div>
        </section>
    </div>
    <div class="col-md-3">
        <section class="panel panel-warning">
            <header class="panel-heading">
                <div class="panel-actions">
                    <a href="#" class="fa fa-caret-down"></a>
                    <a href="#" class="fa fa-times"></a>
                </div>

                <h2 class="panel-title">Notification(s)</h2>
            </header>
            <div class="panel-body">
                <h2>NOTIFICATION BADGE/LABEL</h2>
            </div>
        </section>
    </div>
    <div class="col-md-3">
        <section class="panel panel-dark">
            <header class="panel-heading">
                <div class="panel-actions">
                    <a href="#" class="fa fa-caret-down"></a>
                    <a href="#" class="fa fa-times"></a>
                </div>

                <h2 class="panel-title">Histories</h2>
            </header>
            <div class="panel-body">
                <h2>HISTORY BADGE/LABEL</h2>
            </div>
        </section>
    </div>
</div>

<!-- Team information -->
<div class="row">
    <div class="col-md-4">
        <section class="panel panel-primary">
            <header class="panel-heading">
                <div class="panel-actions">
                    <a href="#" class="fa fa-caret-down"></a>
                    <a href="#" class="fa fa-times"></a>
                </div>

                <h2 class="panel-title">Developer</h2>
            </header>
            <div class="panel-body">
                <h2>DEVELOPER PROFILE SECTION</h2>
            </div>
        </section>
    </div>
    <div class="col-md-8">
        <section class="panel panel-dark">
            <header class="panel-heading">
                <div class="panel-actions">
                    <a href="#" class="fa fa-caret-down"></a>
                    <a href="#" class="fa fa-times"></a>
                </div>

                <h2 class="panel-title">Team</h2>
            </header>
            <div class="panel-body">
                <h2>TEAM PROFILE SECTION</h2>
            </div>
        </section>
    </div>
</div>

<!-- Ticket children sections-->
<div class="row">
    <div class="col-md-6">
        <section class="panel panel-dark">
            <header class="panel-heading">
                <div class="panel-actions">
                    <a href="#" class="fa fa-caret-down"></a>
                    <a href="#" class="fa fa-times"></a>
                </div>

                <h2 class="panel-title">Comments</h2>
            </header>
            <div class="panel-body">
                <h2>A MECHANISM FOR DISPLAYING AND ADDING COMMENTS</h2>
            </div>
        </section>
    </div>
    
    <div class="col-md-6">
        <section class="panel panel-warning">
            <header class="panel-heading">
                <div class="panel-actions">
                    <a href="#" class="fa fa-caret-down"></a>
                    <a href="#" class="fa fa-times"></a>
                </div>

                <h2 class="panel-title">Attachment(s)</h2>
            </header>
            <div class="panel-body">
               
                <!-- Top row will be for the entire display -->
                <div class="row">
                    <div class="col-md-12">

                        @if (TicketDecisionHelper.TicketIsEditableByUser(Model))
                        {
                            using (Html.BeginForm("Create", "TicketAttachments", FormMethod.Post, new { enctype = "Multipart/form-data" }))
                            {

                                @Html.AntiForgeryToken()
                                @Html.Hidden("TicketId", Model.Id)
                                <div class="row">
                                    <div class="col-md-12">
                                        @Html.TextBox("AttachmentTitle", null, new { @class = "form-control cell-fill-input", placeholder = "Title" })
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        @Html.TextArea("AttachmentDescription", new { @class = "form-control cell-fill-textarea", rows = 5, cols = 150, placeholder = "Description" })
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <input type="file" name="attachment" />
                                    </div>
                                </div>
                                <br />
                                <div class="row">
                                    <div class="col-md-12">
                                        <button type="submit" class="btn btn-primary btn btnPad">Add Attachment</button>
                                    </div>
                                </div>
                            }
                        }
                    </div>
                </div>

                <hr />

                @foreach (var attachment in Model.TicketAttachments)
                        {
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <img src="@ImageHelpers.GetIconPath(attachment.AttachmentUrl)"/>
                                       
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <a target="_blank" href="@attachment.AttachmentUrl">@Path.GetFileNameWithoutExtension(attachment.AttachmentUrl)</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <div class="row">
                                        <div class="col-md-6">@attachment.Created.ToString("MMM d, yyyy")</div>
                                        <div class="col-md-6">@attachment.User.FullName</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            @attachment.Title
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            @attachment.Description
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
            </div>
        </section>
    </div>
</div>

<div class="row">
    <div class="col-md-6">
        <section class="panel panel-warning">
            <header class="panel-heading">
                <div class="panel-actions">
                    <a href="#" class="fa fa-caret-down"></a>
                    <a href="#" class="fa fa-times"></a>
                </div>

                <h2 class="panel-title">Notification(s)</h2>
            </header>
            <div class="panel-body">
                <h2>A MECHANISM FOR DISPLAYING NOTIFICATIONS</h2>
            </div>
        </section>
    </div>
    <div class="col-md-6">
        <section class="panel panel-dark">
            <header class="panel-heading">
                <div class="panel-actions">
                    <a href="#" class="fa fa-caret-down"></a>
                    <a href="#" class="fa fa-times"></a>
                </div>

                <h2 class="panel-title">Histories</h2>
            </header>
            <div class="panel-body">
                <h2>A MECHANISM FOR DISPLAYING HISTORIES</h2>
            </div>
        </section>
    </div>
</div>
